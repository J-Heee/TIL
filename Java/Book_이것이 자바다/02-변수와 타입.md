# Chapter 02. 변수와 타입

## 2021.03.05

### 2-1. 변수(Variable)
- **하나의 값을 저장할 수 있는 메모리 공간**
- 한 가지 타입의 값만 저장 가능
  - ex) 정수 타입 변수에는 정수값만 저장 가능, 실수 타입 변수에는 실수값만 저장 가능

<br>

#### 변수 선언
- ex) int age; double value;
- **타입** : 변수에 저장되는 값의 종류와 범위를 결정
- **변수 이름** : 메모리 주소에 붙여진 이름
- **변수 명명 규칙(naming convention)** 을 따라야 함
  - 첫 번째 글자는 문자, '$', '_' 이어야 하고 숫자로 시작 불가
  - 영어 대소문자 구분
  - 문자 수(길이) 제한 없음
  - 자바 예약어 사용 불가
  - 관례) 첫 문자는 영어 소문자로 시작, 다른 단어가 붙을 경우 첫 문자를 대문자로 함

<br>

#### 변수 사용
- **초기값** : 변수를 선언하고 처음 값을 저장하는 경우
- **초기화** : 변수에 초기값을 주는 행위
- **리터럴(literal)** : 소스 코드 내에서 직접 입력된 값, 변수의 초기값으로 많이 나타남
  - 정수 리터럴 : byte, char, short, int, long 5개의 타입에 저장 가능
  - 실수 리터럴 : float, double 타입에 저장 가능
  - 문자 리터럴 : 작은 따옴표(')로 묶은 텍스트, char 타입에만 저장 가능
    - **이스케이프(escape) 문자** : 역슬래쉬가 붙은 문자 리터럴로 특수한 용도로 사용 
  - 문자열 리터럴 : 큰따옴표(")로 묶은 텍스트
    - 큰따옴표 안에는 텍스트가 없어도 문자열 리터럴로 간주
    - 문자열 리터럴 내부에서도 이스케이프 문자 사용 가능
    - String 타입에만 저장 가능
  - 논리 리터럴 : true / false, boolean 타입에만 저장 가능
- **변수는 선언된 {블록} 내에서만 사용 가능**
- **로컬 변수(local variable)** : 메소드 블록 내에서 선언된 변수
  - 로컬 변수는 메소드 실행이 끝나면 메모리에서 자동으로 소멸 

<br>
<br>

### 2-2. 데이터 타입
#### 기본(원시: primitive) 타입
- 정수, 실수, 문자, 논리 리터럴을 직접 저장하는 타입
  |값의 종류|기본 타입|메모리 사용 크기|저장되는 값의 범위|
  |:--------:|:----------:|:---------------:|-----------------|
  |정수|byte|1 byte|(-2<sup>n-1</sup>) ~ (2<sup>n-1</sup>-1), n = 메모리 사용 크기(bit 수)|
  ||char|2 byte||
  ||short|2 byte||
  ||int|4 byte||
  ||long|8 byte||
  |실수|float|4 byte|가수와 지수 부분에 사용되는 bit 크기에 따라 결정|
  ||double|8 byte||
  |논리|boolean|1 byte|true, false|

<br>

#### 정수 타입(byte, char, short, int, long)
- 자바는 기본적으로 **정수 연산을 int 타입으로 수행**
- **최상위 비트(MSB: Most Significant Bit)는 정수값의 부호 결정**
  - 최상위 비트가 0 : 양의 정수
  - 최상위 비트가 1 : 음의 정수
- **쓰레기값** : 저장할 수 있는 값의 범위를 초과해서 엉터리 값이 변수에 저장된 경우
  - 저장할 수 있는 값의 범위를 초과하면 최소값부터 다시 반복 저장
- **자바는 모든 문자를 유니코드(Unicode)로 처리**
  - 유니코드 : 세계 각국의 문자들을 코드값으로 매핑한 국제 표준 규약
    - 하나의 문자에 대한 하나의 코드값을 부여
    - 0 - 65535 범위의 2byte 크기를 가진 정수값
- **byte 타입**
  - 이진(바이너리) 데이터 처리에 주로 사용
- **char 타입**
  - **하나의 유니코드를 저장하기 위해** 2byte 크기인 char 타입 제공
    - 유니코드는 음수가 없기 때문에 char 타입 변수에는 음수 값 저장 불가
    - char 타입 변수에 작은 따옴표로 감싼 문자 대입하면, 해당 문자의 유니코드 저장
    - char 타입 변수에 직접 유니코드 정수값 저장도 가능
  - char 타입 변수는 **단 하나의 문자만 저장**
    - 문자열 저장 시 String 타입 사용
    - String은 기본 타입이 아닌 클래스 타입
- **short 타입**
  - 2byte로 표현되는 정수값을 저장할 수 있는 데이터 타입
  - 비교적 자바에서는 잘 사용되지 않는 타입
- **int 타입**
  - 4byte로 표현되는 정수값을 저장할 수 있는 데이터 타입
  - **자바에서 정수 연산을 하기 위한 기본 타입**
- **long 타입**
  - 8byte로 표현되는 정수값을 저장할 수 있는 데이터 타입
  - long 타입의 변수를 초기화할 때, **int 타입의 저장 범위를 넘어서는 큰 정수**일 경우 반드시 **정수값 뒤에 소문자 'l'이나 대문자 'L'를 붙여야 함**
    - 컴파일러에게 4byte 정수 데이터가 아니라 8byte 정수 데이터임을 알려주기 위해 

<br>

#### 실수 타입(float, double)
- 소수점이 있는 실수 데이터를 저장할 수 있는 타입
- 실수는 **부동 소수점(floating-point) 방식으로 저장**
  - 다른 저장 방식 때문에 정수 타입과 같은 메모리 크기의 사용으로도, 정수 타입보다 훨씬 더 큰 범위의 값 저장 가능  
- **자바는 실수 리터럴의 기본 타입을 double로 간주**
  - float보다 double이 더 정밀한 값 저장 가능
  - 실수 리터럴을 **float 타입 변수에 저장하려면, 리터럴 뒤에 소문자 'f'나 대문자 'F'를 붙여야 함**

<br>

#### 논리 타입(boolean)
- 1byte로 표현되는 논리값(true/false)을 저장할 수 있는 데이터 타입
- 두 가지 상태값을 저장할 필요성이 있을 경우에 사용
- 상태값에 따라 조건문과 제어문의 실행 흐름을 변경하는데 주로 사용

<br>
<br>

### 2-3. 타입 변환
- 타입 변환 : 데이터 타입을 다른 데이터 타입으로 변환하는 것

<br>

#### 자동 타입 변환(Promotion)
- 프로그램 실행 도중에 자동적으로 타입 변환이 일어나는 것
- 사용하는 메모리 크기를 기준으로, **작은 크기를 가지는 타입이 큰 크기를 가지는 타입에 저장될 때 발생**
  - 크기별로 타입 정리
    ```
    byte(1) < short(2) < int(4) < long(8) < float(4) < double(8)
    ```
    - float가 표현할 수 있는 값의 범위가 더 크기 때문에, 같은 4byte 크기인 int와 long보다 큰 타입으로 표시
- 자동 타입 변환이 발생되면, **변환 이전의 값과 변환 이후의 값은 동일(손실이 발생하지 않음)**
- 정수 타입이 실수 타입으로 변환하는 것은 무조건 자동 타입 변환
  - 변환되면 .0이 붙은 실수값이 됨
- char 타입이 int 타입으로 자동 변환되면 유니코드 값이 int 타입에 저장
- **예외) 음수가 저장될 수 있는 byte 타입을 char 타입으로 자동 변환시킬 수 없음**
  - char는 2byte의 크기를 가지기는 하지만, 범위는 0-65535이므로 음수를 저장할 수 없기 때문

<br>

#### 강제 타입 변환(캐스팅: Casting)
- **강제적으로 큰 데이터 타입을 작은 데이터 타입으로 쪼개어서 저장하는 것**
- **캐스팅 연산자 `()` 사용**, 괄호 안에는 쪼개는 단위의 타입이 들어감
  ```
  int intValue = 103029770;
  byte byteValue = (byte) intValue;           // 강제 타입 변환(캐스팅)
  ```
  - `intValue`를 1byte씩 쪼개고, 끝에 있는 1byte만 `byteValue`변수에 저장
- 쪼개서 끝 부분만 저장되므로, **원래의 값이 보존되지 않을 수 있음**
- **int 타입은 char 타입으로** 자동 변환되지 않으므로 강제 타입 변환을 사용
  - int 타입에 저장된 값이 유니코드 범위(0-65535)라면, `(char)` 캐스팅 연산자를 사용해서 변환 가능
  - char 타입으로 변환된 값을 출력하면 유니코드에 해당하는 문자가 출력
- **실수 타입은 정수 타입으로** 자동 변환되지 않으므로 강제 타입 변환을 사용
  - 소수점 이하 부분은 버려지고, 정수 부분만 저장됨
- **주의할 점) 사용자로부터 입력받은 값을 변환할 때 값의 손실이 발생하지 않도록 해야 함**
  - 어떤 값을 다른 타입으로 변환하고자 할 때는, **변환될 타입의 최소값과 최대값을 벗어나는지** 반드시 검사하고, 만약 벗어난다면 타입 변환을 하지 말아야 함  
  - 자바에서 기본 타입에 대해 최대값(max)과 최소값(min)을 상수로 제공하는 것 이용(boolean과 char 타입은 제공하지 않음)
    |기본 타입|최대값 상수|최소값 상수|
    |:--------:|-----------|-----------|
    |byte|Byte.MAX_VALUE|Byte.MIN_VALUE|
    |short|Short.MAX_VALUE|Short.MIN_VALUE|
    |int|Integer.MAX_VALUE|Integer.MIN_VALUE|
    |...|...|...|...|
- **주의할 점) 정수 타입을 실수 타입으로 변환할 때 정밀도 손상을 피해야 함**
  - 모든 int 값을 실수 타입으로 정밀도 손실 없이 안전하게 변환시키는 **double 타입 사용** 권장

<br>

#### 연산식에서의 자동 타입 변환
- 연산은 기본적으로 같은 타입의 피연산자 간에만 수행
- 서로 다른 타입의 피연산자가 있을 경우, 두 피연산자 중 크기가 큰 타입으로 자동 변환된 후 연산 수행